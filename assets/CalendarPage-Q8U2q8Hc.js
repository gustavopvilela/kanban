import{c as D,r as h,j as e,o as f,u as M,p as N,e as S,L as b}from"./index-DhXS4PMe.js";import{c as k,C as I}from"./CardModal-CIm7MV5a.js";/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var w=D("outline","layout-board","IconLayoutBoard",[["path",{d:"M4 4m0 2a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M4 9h8",key:"svg-1"}],["path",{d:"M12 15h8",key:"svg-2"}],["path",{d:"M12 4v16",key:"svg-3"}]]);const A=({cardsByDate:m,onCardClick:o})=>{const[c,u]=h.useState(new Date),i=a=>{u(t=>{const s=new Date(t);return s.setMonth(s.getMonth()+a),s})},d=c.getFullYear(),n=c.getMonth(),l=c.toLocaleString("pt-BR",{month:"long"}),g=new Date(d,n,1).getDay(),p=new Date(d,n+1,0).getDate(),y=Array.from({length:p},(a,t)=>t+1),x=Array.from({length:g},(a,t)=>t);return e.jsxs("div",{className:"calendar-grid-container",children:[e.jsxs("div",{className:"calendar-grid-header",children:[e.jsx("button",{onClick:()=>i(-1),className:"calendar-grid-nav-btn",children:e.jsx(k,{})}),e.jsxs("h2",{className:"calendar-grid-title",children:[l.charAt(0).toUpperCase()+l.slice(1)," de ",d]}),e.jsx("button",{onClick:()=>i(1),className:"calendar-grid-nav-btn",children:e.jsx(f,{})})]}),e.jsx("div",{className:"calendar-grid-weekdays",children:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"].map(a=>e.jsx("div",{children:a},a))}),e.jsxs("div",{className:"calendar-grid-body",children:[x.map(a=>e.jsx("div",{className:"calendar-grid-day calendar-grid-empty"},`empty-${a}`)),y.map(a=>{const t=`${d}-${String(n+1).padStart(2,"0")}-${String(a).padStart(2,"0")}`,s=(m[t]||[]).filter(r=>!r.isArchived),v=new Date().toDateString()===new Date(d,n,a).toDateString();return e.jsxs("div",{className:`calendar-grid-day ${v?"calendar-grid-today":""}`,children:[e.jsx("div",{className:"calendar-grid-day-number",children:a}),e.jsx("div",{className:"calendar-grid-day-cards",children:s.map(r=>!r.isArchived&&e.jsx("div",{className:"calendar-grid-card",title:r.title,onClick:()=>o(r),"data-priority":r.priority,children:r.title},r.id))})]},t)})]})]})},j={high:1,medium:2,low:3},$=()=>{const{id:m}=M(),[o,c]=h.useState(null),[u,i]=h.useState(!1),d=h.useMemo(N,[]),{board:n,cardsWithDueDate:l,allColumns:g}=S(a=>d(a,m)),p=h.useMemo(()=>{const a={};l.forEach(t=>{const s=t.dueDate.split("T")[0];a[s]||(a[s]=[]),a[s].push(t)});for(const t in a)a[t].sort((s,v)=>{const r=j[s.priority]||99,C=j[v.priority]||99;return r-C});return a},[l]),y=a=>{const t=Object.values(g).find(s=>s.cards.includes(a.id));c({...a,columnId:t==null?void 0:t.id}),i(!0)},x=()=>{i(!1),c(null)};return n?e.jsxs("div",{className:"calendar-page-container",children:[e.jsxs("div",{className:"calendar-page-header",children:[e.jsxs("h1",{children:["Calendário: ",n.title]}),e.jsxs(b,{to:`/board/${n.id}`,className:"btn-secondary",children:[e.jsx(w,{size:16}),"Voltar ao quadro"]})]}),e.jsx(A,{cardsByDate:p,boardId:m,onCardClick:y}),e.jsx(I,{isOpen:u,onClose:x,card:o,columnId:o==null?void 0:o.columnId})]}):e.jsx("div",{children:"Quadro não encontrado!"})};export{$ as default};
