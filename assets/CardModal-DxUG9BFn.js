import{c as j,r as i,j as e,z as G,u as _,B as J,M as K,i as O,I as U,C as Z,d as ee,v as L,E as te}from"./index-DGkv2Soa.js";/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var se=j("outline","alert-triangle","IconAlertTriangle",[["path",{d:"M12 9v4",key:"svg-0"}],["path",{d:"M10.363 3.591l-8.106 13.534a1.914 1.914 0 0 0 1.636 2.871h16.214a1.914 1.914 0 0 0 1.636 -2.87l-8.106 -13.536a1.914 1.914 0 0 0 -3.274 0z",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var V=j("outline","archive-off","IconArchiveOff",[["path",{d:"M8 4h11a2 2 0 1 1 0 4h-7m-4 0h-3a2 2 0 0 1 -.826 -3.822",key:"svg-0"}],["path",{d:"M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 1.824 -1.18m.176 -3.82v-7",key:"svg-1"}],["path",{d:"M10 12h2",key:"svg-2"}],["path",{d:"M3 3l18 18",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var q=j("outline","archive","IconArchive",[["path",{d:"M3 4m0 2a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v0a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10",key:"svg-1"}],["path",{d:"M10 12l4 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var B=j("outline","check","IconCheck",[["path",{d:"M5 12l5 5l10 -10",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ae=j("outline","chevron-left","IconChevronLeft",[["path",{d:"M15 6l-6 6l6 6",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ne=j("outline","circle-check","IconCircleCheck",[["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-0"}],["path",{d:"M9 12l2 2l4 -4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ie=j("outline","circle","IconCircle",[["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var le=j("outline","exclamation-circle","IconExclamationCircle",[["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-0"}],["path",{d:"M12 9v4",key:"svg-1"}],["path",{d:"M12 16v.01",key:"svg-2"}]]);const H=l=>{if(!l)return"";const[m,a,g]=l.split("-");return`${g}/${a}/${m}`},Q=(l,m="pt-BR")=>l.toLocaleString(m,{month:"long"});function ce({selectedDate:l,onDateChange:m}){const[a,g]=i.useState(!1),[r,y]=i.useState(new Date),[p,D]=i.useState(H(l)),[b,A]=i.useState({top:0,left:0}),[o,u]=i.useState("days"),[f,w]=i.useState(new Date().getFullYear()),k=i.useRef(null),v=i.useRef(null),d=new Date;d.setHours(0,0,0,0),i.useEffect(()=>{D(H(l));const t=l?new Date(`${l}T00:00:00`):new Date;y(t)},[l]),i.useEffect(()=>{const t=s=>{k.current&&!k.current.contains(s.target)&&(g(!1),u("days"))};return document.addEventListener("mousedown",t),()=>{document.removeEventListener("mousedown",t)}},[]),i.useEffect(()=>{if(a&&v.current){const t=v.current.getBoundingClientRect(),s=280,n=8,x=window.innerWidth-(t.right+n+s)>0?t.right+window.scrollX+n:t.left+window.scrollX-s-n;A({top:t.top+window.scrollY,left:x})}},[a]);const M=()=>{a?(g(!1),u("days")):g(!0)},N=t=>{const n=new Date(r.getFullYear(),r.getMonth(),t).toISOString().split("T")[0];m(n),g(!1),u("days")},z=t=>{y(new Date(r.setMonth(t))),u("days")},Y=t=>{y(new Date(r.setFullYear(t))),u("days")},T=t=>{o==="days"?y(s=>{const n=new Date(s);return n.setMonth(n.getMonth()+t),n}):o==="years"&&w(s=>s+t*12)},E=()=>{const t=r.getFullYear();let s;switch(o){case"months":s=e.jsx("span",{className:"calendar-title year-title",onClick:()=>u("years"),children:t});break;case"years":{const n=f+11;s=e.jsx("span",{className:"calendar-title",children:`${f} - ${n}`});break}default:s=e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"calendar-title month-title",onClick:()=>u("months"),children:Q(r)}),e.jsx("span",{className:"calendar-title year-title",onClick:()=>{w(Math.floor(t/12)*12),u("years")},children:t})]})}return e.jsxs("div",{className:"calendar-header",children:[e.jsxs("button",{type:"button",onClick:()=>T(-1),disabled:o==="months",children:[" ",e.jsx(ae,{size:20})," "]}),e.jsx("div",{className:"calendar-title-container",children:s}),e.jsxs("button",{type:"button",onClick:()=>T(1),disabled:o==="months",children:[" ",e.jsx(G,{size:20})," "]})]})},P=()=>{const t=r.getFullYear(),s=r.getMonth(),n=new Date(t,s,1).getDay(),h=new Date(t,s+1,0).getDate(),x=[],I=l?new Date(`${l}T00:00:00`):null;for(let c=0;c<n;c++)x.push(e.jsx("div",{className:"calendar-day empty"},`empty-${c}`));for(let c=1;c<=h;c++){const S=new Date(t,s,c),$=S<d,W=d.toDateString()===S.toDateString(),X=I&&I.toDateString()===S.toDateString();let F="calendar-day";W&&(F+=" today"),X&&(F+=" selected"),$&&(F+=" disabled"),x.push(e.jsx("button",{type:"button",className:F,onClick:()=>N(c),disabled:$,children:c},c))}return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"calendar-weekdays",children:["D","S","T","Q","Q","S","S"].map((c,S)=>e.jsx("div",{children:c},S))}),e.jsx("div",{className:"calendar-grid",children:x})]})},R=()=>{const t=[...Array(12).keys()].map(h=>Q(new Date(0,h))),s=d.getFullYear(),n=d.getMonth();return e.jsx("div",{className:"calendar-grid-large",children:t.map((h,x)=>{const I=r.getFullYear(),c=I<s||I===s&&x<n;return e.jsx("button",{className:`calendar-cell ${r.getMonth()===x?"selected":""} ${c?"disabled":""}`,onClick:()=>z(x),disabled:c,children:h.substring(0,3)},h)})})},C=()=>{const t=Array.from({length:12},(n,h)=>f+h),s=d.getFullYear();return e.jsx("div",{className:"calendar-grid-large",children:t.map(n=>{const h=n<s;return e.jsx("button",{className:`calendar-cell ${r.getFullYear()===n?"selected":""} ${h?"disabled":""}`,onClick:()=>Y(n),disabled:h,children:n},n)})})};return e.jsxs("div",{ref:k,children:[e.jsx("div",{className:"date-picker-input",onClick:M,ref:v,children:p||e.jsx("span",{className:"placeholder",children:"Selecione uma data"})}),a&&e.jsxs("div",{className:"calendar-popup",style:{position:"fixed",top:b.top,left:b.left,zIndex:1050},children:[E(),e.jsxs("div",{className:"calendar-body",children:[o==="days"&&P(),o==="months"&&R(),o==="years"&&C()]})]})]})}function oe({isOpen:l,onClose:m,card:a,columnId:g,onDeleteCard:r}){const y=_(),{addToast:p}=J(),[D,b]=i.useState(""),[A,o]=i.useState(""),[u,f]=i.useState("medium"),[w,k]=i.useState(""),[v,d]=i.useState([]),[M,N]=i.useState(""),z=a!=null;i.useEffect(()=>{l&&a?(b(a.title||""),o(a.description||""),f(a.priority||"medium"),k(a.dueDate?a.dueDate.split("T")[0]:""),d(a.checklist||[]),a.isArchived&&p("Este cartão está arquivado e não pode ser editado.",{type:"warning",icon:e.jsx(se,{size:24})})):l&&(b(""),o(""),f("medium"),k(""),d([]),N(""))},[l,a,p]);const Y=t=>{if(t.preventDefault(),!D.trim()){p("O título do cartão não pode estar vazio.",{type:"danger",icon:e.jsx(le,{size:24})});return}const s={title:D.trim(),description:A.trim(),priority:u,dueDate:w,checklist:v,isArchived:a?a.isArchived:!1};a?(y(Z({updatedCard:{...a,...s}})),p("Cartão atualizado com sucesso!",{type:"success",icon:e.jsx(B,{size:24})})):(y(ee({columnId:g,newCard:{id:L(),...s}})),p("Cartão criado com sucesso!",{type:"success",icon:e.jsx(B,{size:24})})),m()},T=()=>{a&&(y(te({cardId:a.id})),a.isArchived?p("Cartão desarquivado.",{type:"info",icon:e.jsx(V,{size:24})}):p("Cartão arquivado.",{type:"info",icon:e.jsx(q,{size:24})}),m())},E=()=>{if(M.trim()){const t={id:L(),text:M.trim(),completed:!1};d([...v,t]),N("")}},P=t=>{d(v.map(s=>s.id===t?{...s,completed:!s.completed}:s))},R=t=>{d(v.filter(s=>s.id!==t))},C=`form-group ${a&&a.isArchived?"readonly-container":""}`;return e.jsx(K,{isOpen:l,onClose:m,children:e.jsxs("div",{className:"card-modal-content",children:[e.jsx("h2",{className:"modal-title",children:z?"Editar cartão":"Criar novo cartão"}),e.jsx("div",{className:"modal-divider"}),e.jsxs("form",{onSubmit:Y,children:[e.jsxs("div",{className:C,children:[e.jsx("label",{htmlFor:"cardTitle",children:"Título"}),e.jsx("input",{type:"text",id:"cardTitle",value:D,onChange:t=>b(t.target.value),placeholder:"Ex: Desenvolver a tela de login"})]}),e.jsxs("div",{className:C,children:[e.jsx("label",{htmlFor:"cardDescription",children:"Descrição"}),e.jsx("textarea",{id:"cardDescription",value:A,onChange:t=>o(t.target.value),placeholder:"Adicione uma descrição mais detalhada...",rows:"3"})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:C,children:[e.jsx("label",{htmlFor:"cardPriority",children:"Prioridade"}),e.jsxs("select",{id:"cardPriority",value:u,onChange:t=>f(t.target.value),children:[e.jsx("option",{value:"low",children:"Baixa"}),e.jsx("option",{value:"medium",children:"Média"}),e.jsx("option",{value:"high",children:"Alta"})]})]}),e.jsxs("div",{className:C,children:[e.jsx("label",{htmlFor:"cardDueDate",children:"Prazo"}),e.jsx(ce,{selectedDate:w,onDateChange:k})]})]}),e.jsxs("div",{className:C,children:[e.jsx("label",{children:"Checklist"}),e.jsx("div",{className:"checklist-container",children:v.map(t=>e.jsxs("div",{className:`checklist-item ${t.completed?"completed":""}`,children:[e.jsx("button",{type:"button",onClick:()=>P(t.id),children:t.completed?e.jsx(ne,{size:20}):e.jsx(ie,{size:20})}),e.jsx("span",{children:t.text}),e.jsx("button",{type:"button",className:"btn-delete-item",onClick:()=>R(t.id),children:e.jsx(O,{size:18})})]},t.id))}),e.jsxs("div",{className:"add-checklist-item",children:[e.jsx("input",{type:"text",value:M,onChange:t=>N(t.target.value),placeholder:"Adicionar um item..."}),e.jsx("button",{type:"button",className:"btn-secondary add-item-btn",onClick:E,children:e.jsx(U,{})})]})]}),e.jsxs("div",{className:"modal-actions",style:{justifyContent:"space-between",alignItems:"center"},children:[e.jsx("div",{children:z&&e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",className:"btn-icon",onClick:T,title:a.isArchived?"Desarquivar cartão":"Arquivar cartão",children:a.isArchived?e.jsx(V,{size:22}):e.jsx(q,{size:22})}),e.jsx("button",{type:"button",className:"btn-icon btn-delete",onClick:()=>r(a),style:{marginLeft:"8px"},children:e.jsx(O,{size:22})})]})}),e.jsxs("div",{children:[" ",e.jsx("button",{type:"button",className:"btn-secondary cancel-btn",onClick:m,style:{marginRight:"8px"},children:"Cancelar"}),(!a||!a.isArchived)&&e.jsx("button",{type:"submit",className:"btn-primary",children:"Salvar"})]})]})]})]})})}export{oe as C,ne as I,V as a,q as b,se as c,ae as d};
